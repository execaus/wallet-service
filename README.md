# API Wallet Service

Этот сервис предоставляет эндпоинты для управления балансами кошельков, включая пополнение, списание и проверку баланса.

## Эндпоинты

### 1. Пополнение или списание для кошелька

**POST** `/api/v1/wallet`

**Тело запроса:**
```json
{
  "walletId": "UUID",
  "operationType": "DEPOSIT или WITHDRAW",
  "amount": 1000
}
```

**Описание:**  
Выполняет указанную операцию (пополнение или списание) для кошелька с идентификатором `walletId`. Баланс кошелька будет обновлен в базе данных.

**Ответ:**
```json
{
  "walletId": "UUID",
  "newBalance": 1500
}
```

---

### 2. Получение баланса кошелька

**GET** `/api/v1/wallets/{WALLET_UUID}`

**Описание:**  
Возвращает текущий баланс кошелька с идентификатором `WALLET_UUID`.

**Ответ:**
```json
{
  "walletId": "UUID",
  "balance": 1500
}
```

---

## Настройка окружения

Перед запуском сервиса необходимо создать и заполнить файл `config.env` в корне проекта со следующими переменными:

```env
SERVER_PORT=8080
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=1234
DATABASE_NAME=app
DATABASE_TEST=true
```

 Если `DATABASE_TEST` установлен в `true`, приложение может создавать тестовые кошельки с предустановленным балансом для тестирования, например:

| Wallet ID | Balance |
|-----------|--------|
| 3f9a1b9e-2f64-4f42-9b4d-2d1c9a5ef901 | 100 |
| 5d2c7e80-1a34-4b74-8cc2-9f0e4f3c2a12 | 10 |
| 5d2c7e80-1a34-4b74-8cc2-9f0e4f3c2a13 | 0 |
| 5d2c7e80-1a34-4b74-8cc2-9f0e4f3c2a14 | 10000 |

## Запуск через Docker Compose

Для запуска сервиса с базой данных PostgreSQL можно использовать `docker-compose`.

1. Убедитесь, что файл `config.env` создан (см. выше) и содержит все необходимые переменные окружения. Вы можете скопировать базовые значения из предыдущего блока.

2. Запустите сервис:

```bash
docker-compose up --build
```

Сервис будет доступен на порту `8080`.
